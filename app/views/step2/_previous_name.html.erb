<% content_for :head do %>
  <script>
  $(document).ready(function() {
    checkboxTogglesSet($('#registrant_change_of_name'), $('#prev_name_set'), $('#prev_name_rule'));
    $('#javascript_disabled').remove();
  });
  </script>
<% end %>

<fieldset class='no_border'>
  <ul class="checkbox checkbox-with-tooltip">
    <li class="spacer">&nbsp;</li>
    <li class="registrant-form__change-of-name__line">
      <h3><%= form.check_box :change_of_name %> <%= form.label :change_of_name, I18n.t('activerecord.attributes.registrant.change_of_name') %> <%= tooltip_tag(:previous_name) %></h3>
    </li>
  </ul>
</fieldset>

<fieldset id="prev_name_set">
  <%= hidden_field_tag "javascript_disabled", "1"  %>
  <legend><span><%= I18n.t('txt.registration.previous_name') %></span></legend>
  <ul class="stacked">
    <li class="width_d registrant-form__prev-name-title__line">
      <h3><%= form.label :prev_name_title %></h3>
      <%= select_div form, :prev_name_title, @registrant.titles, :include_blank => true %>
      <span class="error"><%= form.object.errors[:prev_name_title].join("\n") %></span>
    </li>
    <li class="width_b registrant-form__prev-first-name__line">
      <h3><%= form.label :prev_first_name %></h3>
      <%= field_div form, :prev_first_name, :size => 15 %>
      <span class="error"><%= form.object.errors[:prev_first_name].join("\n") %></span>
    </li>
    <li class="width_c registrant-form__prev-middle-name__line">
      <h3><%= form.label :prev_middle_name %></h3>
      <%= field_div form, :prev_middle_name, :size => 10 %>
      <span class="error"><%= form.object.errors[:prev_middle_name].join("\n") %></span>
    </li>
    <li class="width_b registrant-form__prev-last-name__line">
      <h3><%= form.label :prev_last_name %></h3>
      <%= field_div form, :prev_last_name, :size => 15 %>
      <span class="error"><%= form.object.errors[:prev_last_name].join("\n") %></span>
    </li>
    <li class="width_d registrant-form__prev-name-suffix__line">
      <h3><%= form.label :prev_name_suffix %></h3>
      <div><%= form.select :prev_name_suffix,  @registrant.suffixes, :include_blank => t('txt.registration.select_none') %></div>
      <span class="error"><%= form.object.errors[:prev_name_suffix].join("\n") %></span>
    </li>
  </ul>
</fieldset>