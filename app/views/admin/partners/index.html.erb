<%= render :partial=>"admin/shared/admin_nav" %>
<%- publish_confirmation = 'text explainging publishing details '%>

<h1>Partners</h1>

<%= form_for [ :admin, @partner_zip], :url=>admin_partner_zips_path, :html => { :multipart => true }  do |f| %>
  <%= f.file_field 'zip_file' %>
  <%= f.label 'zip_file', 'Upload partner-creation zip file' %>
  <%= f.submit 'Upload' %>
<%- end %>
  

<table id="partners">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Organization</th>
      <th>API Key</th>
      <th>Whitelabeled</th>
      <th></th>
      <%- if show_custom_branding %>
      <th></th>
      <th></th>
      <%- end %>
    </tr>
  </thead>
  <tbody>
    <%- @partners.each do |p| %>
      <tr class="partner-<%= p.id %>">
        <td><%= p.id %></td>
        <td><%= h p.name %></td>
        <td><%= h p.organization %></td>
        <td><%= h p.api_key %></td>
        <td><%= p.whitelabeled? ? 'Yes' : 'No' %></td>
        <td><%= link_to "Show", admin_partner_path(p) %></td>
        <%- if show_custom_branding %>
        <td><%= link_to "Preview", p.preview_custom_assets_link, target: '_blank' %></td>
        <td><%= link_to "Publish", publish_admin_partner_path(p), method: 'post', confirm: publish_confirmation %></td>
        <%- end %>
      </tr>
    <%- end %>
  </tbody>
</table>
