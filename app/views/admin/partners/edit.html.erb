<h1>Edit Partner</h1>
<div class='actions'>
  <%= link_to "Back to partner", [ :admin, @partner ] %>
</div>

<% form_for [ :admin, @partner ], :html => { :multipart => true } do |f| %>
  <fieldset>
    <legend>General</legend>
    <ul class="stacked">
      <li class="width_b">
        <h3><%= f.label :name %></h3>
        <%= field_div f, :name %>
        <span class="error"><%= @partner.errors.on :name %></span>
      </li>
      <li class="width_a">
        <h3><%= f.label :organization %></h3>
        <%= field_div f, :organization %>
        <span class="error"><%= @partner.errors.on :organization %></span>
      </li>
      <li class="width_a">
        <h3><%= f.label :email %></h3>
        <%= field_div f, :email %>
        <span class="error"><%= @partner.errors.on :email %></span>
      </li>
    </ul>
  </fieldset>

  <%- if @partner.can_be_whitelabeled? %>
    <fieldset>
      <legend>Whitelabeling</legend>
      
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :rtv_email_opt_in %>
            <%= f.label :rtv_email_opt_in, 'Ask for RTV email opt-in' %>
          </h3>
        </li>
      </ul>
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :rtv_sms_opt_in %>
            <%= f.label :rtv_sms_opt_in, 'Ask for RTV SMS opt-in' %>
          </h3>
        </li>
      </ul>
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :ask_for_volunteers %>
            <%= f.label :ask_for_volunteers, 'Ask for RTV Volunteers' %>
          </h3>
        </li>
      </ul>
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :partner_email_opt_in %>
            <%= f.label :partner_email_opt_in, 'Ask for partner email opt-in' %>
          </h3>
        </li>
      </ul>
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :partner_sms_opt_in %>
            <%= f.label :partner_sms_opt_in, 'Ask for partner SMS opt-in' %>
          </h3>
        </li>
      </ul>
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :partner_ask_for_volunteers %>
            <%= f.label :partner_ask_for_volunteers, 'Ask for partner Volunteers' %>
          </h3>
        </li>
      </ul>
      <ul class="checkbox">
        <li>
          <h3>
            <%= f.check_box :whitelabeled %>
            <%= f.label :whitelabeled, 'Whitelabeled CSS' %>
          </h3>
        </li>
      </ul>
      
      <div class="whitelabeled">
        <ul class="stacked">
          <li class="width_a">
            <h3>application.css <%= '(missing)' unless @partner.application_css_present? %></h3>
            <div>
              <%= file_field_tag 'css_files[application]' %>
            </div>
          </li>
          <li class="width_a">
            <h3>registration.css <%= '(missing)' unless @partner.registration_css_present? %></h3>
            <div>
              <%= file_field_tag 'css_files[registration]' %>
            </div>
          </li>
        </ul>

        <% EmailTemplate::TEMPLATE_NAMES.each do |name, label| %>
          <ul class="stacked">
            <li class="width_h">
              <h3><label><%= label %></label></h3>
              <%= text_area_tag "template[#{name}]", EmailTemplate.get(@partner, name), :rows => 5 %>
            </li>
          </ul>
        <% end %>
      </div>
    </fieldset>
  <% end %>

  <%= partner_rollover_button 'update', 'Update' %>
<% end %>
